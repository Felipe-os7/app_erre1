{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block content %}
<div class="contact-form-container">
  <h1>Registro</h1>
  <p style="text-align: center; color: var(--gray-muted); margin-bottom: 48px; font-weight: 300; letter-spacing: 0.5px;">
    Crea una cuenta. Se requiere una clave de acceso para registrarse.
  </p>

  {% if form.errors %}
    <div style="background: var(--gray-light); border: 1px solid var(--gray-border); color: var(--black); padding: 20px; margin-bottom: 32px; font-size: 14px; font-weight: 300;">
      <strong style="display: block; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; font-size: 13px;">Por favor corrige los siguientes errores:</strong>
      <ul style="margin: 8px 0 0 20px; list-style: none; padding: 0;">
        {% for field, errors in form.errors.items %}
          {% for error in errors %}
            <li style="margin-bottom: 4px;">• {{ error }}</li>
          {% endfor %}
        {% endfor %}
      </ul>
    </div>
  {% endif %}

  <form method="post" action="{% url 'register' %}">
    {% csrf_token %}
    
    <div class="form-group mb-3">
      <label for="{{ form.username.id_for_label }}" class="form-label">{{ form.username.label }}</label>
      {{ form.username }}
      {% if form.username.help_text %}
        <small class="form-text" style="color: var(--gray-muted); font-size: 12px; display: block; margin-top: 4px; font-weight: 300;">
          {{ form.username.help_text }}
        </small>
      {% endif %}
    </div>

    <div class="form-group mb-3">
      <label for="{{ form.email.id_for_label }}" class="form-label">{{ form.email.label }}</label>
      {{ form.email }}
    </div>

    <div class="form-group mb-3">
      <label for="{{ form.registration_key.id_for_label }}" class="form-label">{{ form.registration_key.label }}</label>
      {{ form.registration_key }}
      {% if form.registration_key.help_text %}
        <small class="form-text" style="color: var(--gray-muted); font-size: 12px; display: block; margin-top: 4px; font-weight: 300;">
          {{ form.registration_key.help_text }}
        </small>
      {% endif %}
    </div>

    <div class="form-group mb-3">
      <label for="{{ form.password1.id_for_label }}" class="form-label">{{ form.password1.label }}</label>
      {{ form.password1 }}
      {% if form.password1.help_text %}
        <small class="form-text" style="color: var(--gray-muted); font-size: 12px; display: block; margin-top: 4px; font-weight: 300;">
          {{ form.password1.help_text }}
        </small>
      {% endif %}
    </div>

    <div class="form-group mb-4">
      <label for="{{ form.password2.id_for_label }}" class="form-label">{{ form.password2.label }}</label>
      {{ form.password2 }}
      {% if form.password2.help_text %}
        <small class="form-text" style="color: var(--gray-muted); font-size: 12px; display: block; margin-top: 4px; font-weight: 300;">
          {{ form.password2.help_text }}
        </small>
      {% endif %}
    </div>

    <button type="submit" class="btn btn-primary w-100">Registrarse</button>
  </form>

  <div style="text-align: center; margin-top: 32px; padding-top: 32px; border-top: 1px solid var(--gray-border);">
    <p style="color: var(--gray-muted); font-size: 14px; margin: 0;">
      ¿Ya tienes una cuenta? 
      <a href="{% url 'login' %}" style="color: var(--black); text-decoration: underline;">Inicia sesión</a>
    </p>
  </div>
</div>
{% endblock %}

